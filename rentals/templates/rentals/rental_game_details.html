{% extends 'rentals/base.html' %}

{% load static %}
{% load humanize %}

{% block content %}
<section class="section section--first section--bg" data-bg="{% if item.bannerImagePath %} {{item.bannerImagePath.url}} {% else %} {% static 'img/cart_bg.jpeg' %} {% endif %}">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="details">
                    <div class="details__head">
                        <div class="details__cover">
                            <img src="{{item.thumbnailImagePath.url}}" alt="">
                            <!-- <a href="http://www.youtube.com/watch?v=0O2aH4XLbto" class="details__trailer"><svg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'><path d='M112,111V401c0,17.44,17,28.52,31,20.16l247.9-148.37c12.12-7.25,12.12-26.33,0-33.58L143,90.84C129,82.48,112,93.56,112,111Z' style='fill:none;stroke-miterlimit:10;stroke-width:32px'/></svg> <span>Watch trailer</span></a> -->
                        </div>

                        <div class="details__wrap">
                            <h3 class="details__title">{{item.name}}</h3>

                            <ul class="details__list">
                                <li><span>Release date:</span> {{item.created_at|naturaltime}}</li>
                                <li><span>Genres:</span> {% for the_cat in item.cat.all %} <span class="post__category">{{the_cat.name}}</span> {% endfor %}</li>
                                <li><span>Vendor:</span> {% if item.adminOwned %} Admin {% else %} {{item.vendor}} {% endif %} </li>
                                <li><span>Languages:</span> English</li>
                            </ul>

                            <div class="details__text">

                                <p> {% if item.desc %} {{item.desc}} {% else %} No Description {% endif %}</p>
                            </div>
                        </div>
                    </div>



                    <div class="details__cart">


                        <span class="details__cart-title">PRICE</span>
                        <div class="details__price">


                            <span>₦{{item.dailyRentalRate | intcomma }}<small>/day</small></span>

                        </div>

                        <div class="details__actions">
                            <!-- <button data-product="{{val.id}}" data-action="add" class="details__buy update-cart" type="button">Add to Cart</button> -->

                            {% if request.user.is_authenticated %}
                            {% if request.user.profile.kyc_status == "approved" and request.user.profile.address_verification_status == "approved" %}
                            <a class="card__buy open-modal" href="#added_featured_to_que_modal_{{item.id}}">Rent</a>
                            {% else %}
                                <a class="card__buy open-modal" href="#verify_to_rent">Rent</a>
                                {% endif %}
                            {% else %}
                            <a class="card__buy open-modal" href="#login_to_rent">Rent</a>
                            {% endif %}


                        </div>


                        <div id="added_featured_to_que_modal_{{item.id}}" class="zoom-anim-dialog mfp-hide modal">
                            <button class="modal__close" type="button"><svg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'><line x1='368' y1='368' x2='144' y2='144' style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/><line x1='368' y1='144' x2='144' y2='368' style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/></svg></button>

                            <h3 class="modal__title">Add {{item.name}} to your Rental Cart</h3>

                            <div class="modal__group">
                                <label class="modal__label" for="value">Rental rate:</label>
                                <span class="modal__value">₦{{item.dailyRentalRate|intcomma}} </span>
                            </div>

                            <div class="modal__group">
                                <div id="que_modal_response_{{item.id}}">
                                <label class="modal__label" for="method"><b>Select Deruation </b></label>
                                <form action="#" class="form" id="que_form_{{item.id}}">
                                    <div class="row">
                                        <div class="col-12 col-md-12 col-lg-12 col-xl-12">
                                            <label class="form__label" for="no_of_days_{{item.id}}">No of Days </label>
                                            <input id="no_of_days_{{item.id}}" type="number" min="1" name="no_of_days" class="form__input">

                                        </div>


                                        <div class="col-12">

                                            <button data-product="{{item.id}}" data-action="add" class="form__btn add-btn update-que" type="button">Proceed </button>
                                        </div>
                                    </div>


                                </form>

                            </div>
                            </div>
                        </div>
                    </div>

                    <div class="details__content">
                        <div class="row">


                            <div class="col-12 col-xl-8 order-xl-1">
                                <!-- comments -->

                                <!-- end comments -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- end section -->

<!-- section -->
<section class="section section--last">
    <div class="container">
        <div class="row">
            <!-- title -->
            <div class="col-12">
                <div class="section__title-wrap">
                    <h2 class="section__title"> Also check out! </h2>


                </div>
            </div>
            <!-- end title -->
        </div>
    </div>

    {% if all_items|length > 0 %}
    <div class="row category">
        {% for val in all_items %}
        <div class="col-12 col-sm-6 col-md-4 col-xl-3">
            <div class="card card--catalog">
                <a href="{{val.get_absolute_url}}" class="card__cover">
                    <img src="{{val.thumbnailImagePath.url}}" alt="">

                </a>

                <div class="card__title">
                    <h3><a href="{{val.get_absolute_url}}">{{val.name}}</a></h3>
                    <span>₦{{val.dailyRentalRate | intcomma }}/day</span>
                </div>

                <div class="card__actions">
                    <a class="card__buy" href="{{val.get_absolute_url}}">View Game</a>

                    <button class="card__favorite" type="button">
                        <svg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'><path d='M352.92,80C288,80,256,144,256,144s-32-64-96.92-64C106.32,80,64.54,124.14,64,176.81c-1.1,109.33,86.73,187.08,183,252.42a16,16,0,0,0,18,0c96.26-65.34,184.09-143.09,183-252.42C447.46,124.14,405.68,80,352.92,80Z' style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/></svg>
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    {% endif %}
</section>
<!-- end section -->
{% endblock content %}



{% block modals %}



<div id="login_to_rent" class="zoom-anim-dialog mfp-hide modal">
    <button class="modal__close" type="button"><svg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'><line x1='368' y1='368' x2='144' y2='144' style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/><line x1='368' y1='144' x2='144' y2='368' style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/></svg></button>

    <h3 class="modal__title">Ooops Sorry!</h3>
    <div class="modal__group">
        <span class="modal__text"> Sorry gamer, only verified users are allowed to rent here!  </span>
    </div>


    <div class="modal__group">
        <label class="modal__label" for="method"><b>Need an Account? </b></label>

        <span class="modal__text"> Head over to <a href="{% url 'account_signup' %}">Sign Up </a>  to get started or continue shopping !</span>
    </div>
</div>


<div id="verify_to_rent" class="zoom-anim-dialog mfp-hide modal">
    <button class="modal__close" type="button"><svg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'><line x1='368' y1='368' x2='144' y2='144' style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/><line x1='368' y1='144' x2='144' y2='368' style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/></svg></button>

    <h3 class="modal__title">Ooops Sorry!</h3>

    <div class="modal__group">
        <span class="modal__text"> Sorry gamer, we are still working on verifying your Identity/Residential. If this is taking too long, please reach out to support!  </span>
    </div>



</div>



{% endblock modals %}


{% block extra_scripts %}
<script type="text/javascript">
    $(document).ready(function(){
        $('#carousel1').owlCarousel({
            loop:false
        });

    });
</script>


{% endblock extra_scripts %}


